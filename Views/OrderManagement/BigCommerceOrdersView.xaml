<UserControl x:Class="CbcRoastersErp.Views.BigCommerceOrdersView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             Background="{DynamicResource BackgroundBrush}"
             Padding="20">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="Auto"/>
            <!-- Search Filters -->
            <RowDefinition Height="*"/>
            <!-- Orders DataGrid -->
            <RowDefinition Height="Auto"/>
            <!-- Pagination and Actions -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0 0 0 20">
            <Image Source="/Views/CBC_Logo_500x500.png"
                   Width="50"
                   Height="50"
                   Stretch="Uniform"
                   Margin="0 0 15 0"
                   RenderOptions.BitmapScalingMode="HighQuality" />

            <TextBlock Text="BigCommerce Orders Management"
                       Style="{StaticResource Heading1TextBlock}"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource PrimaryHueDarkBrush}"/>
        </StackPanel>

        <!-- Search Filters -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0 0 0 20">
            <TextBox Text="{Binding SearchOrderNumber, UpdateSourceTrigger=PropertyChanged}"
                     materialDesign:HintAssist.Hint="Order Number"
                     Style="{StaticResource MaterialDesignOutlinedTextBox}"
                     Width="150"/>

            <TextBox Text="{Binding SearchCustomer, UpdateSourceTrigger=PropertyChanged}"
                     materialDesign:HintAssist.Hint="Customer"
                     Style="{StaticResource MaterialDesignOutlinedTextBox}"
                     Width="200"/>

            <ComboBox ItemsSource="{Binding SSearchStatus, UpdateSourceTrigger=PropertyChanged}"
                                  SelectedItem="{Binding SelectedOrderStatus, Mode=TwoWay}"
                                  DisplayMemberPath="Name"
                                  materialDesign:HintAssist.Hint="Order Status"
                                  Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                  Width="200"/>

            <DatePicker SelectedDate="{Binding SearchStartDate, UpdateSourceTrigger=PropertyChanged}"
                        materialDesign:HintAssist.Hint="Start Date"
                        Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                        Width="150"/>

            <DatePicker SelectedDate="{Binding SearchEndDate, UpdateSourceTrigger=PropertyChanged}"
                        materialDesign:HintAssist.Hint="End Date"
                        Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                        Width="150"/>

            <Button Content="Search"
                    Command="{Binding SearchCommand}"
                    Style="{StaticResource PrimaryButton}"
                    Width="100"/>
        </StackPanel>

        <!-- Orders DataGrid -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding Orders}"
                  AutoGenerateColumns="False"
                  Style="{StaticResource BrandDataGrid}"
                  Margin="0 0 0 20"
                  RowHeight="40"
                  ColumnHeaderHeight="40">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Order #" Binding="{Binding 	BigCommerceID}" Width="100"/>
                <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" Width="200"/>
                <DataGridTextColumn Header="Status" Binding="{Binding OrderStatus}" Width="150"/>
                <DataGridTextColumn Header="Date" Binding="{Binding OrderDate, StringFormat={}{0:MM/dd/yyyy}}" Width="150"/>
                <DataGridTextColumn Header="Total" Binding="{Binding TotalAmount, StringFormat={}{0:C}}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Pagination and Actions -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <Button Content="Previous"
                    Command="{Binding PreviousPageCommand}"
                    Style="{StaticResource PrimaryButton}"
                    Width="100"/>

            <TextBlock Text="{Binding CurrentPage}" VerticalAlignment="Center" FontWeight="SemiBold"/>
            <TextBlock Text=" / " VerticalAlignment="Center"/>
            <TextBlock Text="{Binding TotalPages}" VerticalAlignment="Center" FontWeight="SemiBold"/>

            <Button Content="Next"
                    Command="{Binding NextPageCommand}"
                    Style="{StaticResource PrimaryButton}"
                    Width="100"/>

            <Button Content="Back"
                    Command="{Binding NavigateBackCommand}"
                    Style="{StaticResource SecondaryButton}"
                    Width="100"/>
        </StackPanel>

    </Grid>
</UserControl>
