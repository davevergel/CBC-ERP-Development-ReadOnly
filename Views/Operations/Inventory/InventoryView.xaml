<UserControl x:Class="CbcRoastersErp.Views.InventoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:CbcRoastersErp.Views"
             xmlns:vm="clr-namespace:CbcRoastersErp.ViewModels"
             mc:Ignorable="d" d:DesignWidth="1000">

    <UserControl.DataContext>
        <vm:InventoryViewModel />
    </UserControl.DataContext>

    <Grid Background="#f8f9fa">

        <DockPanel LastChildFill="True" RenderTransformOrigin="0.5,0.5" Grid.RowSpan="2" Margin="0,0,0,210">
            <DockPanel.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform AngleX="0.124"/>
                    <RotateTransform/>
                    <TranslateTransform X="0.998"/>
                </TransformGroup>
            </DockPanel.RenderTransform>

            <!-- Header -->
            <Border Background="#FF1163B5" Padding="20" DockPanel.Dock="Top">
                <TextBlock Text="Inventory Management" Foreground="White"
                           FontSize="22" FontWeight="SemiBold" />
            </Border>

            <!-- Main Layout -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch">
                <StackPanel Margin="20" Orientation="Vertical" VerticalAlignment="Top">

                    <!-- Back to Dashboard -->
                    <Button Content="Back to Dashboard"
                Command="{Binding NavigateBackCommand}"
                HorizontalAlignment="Left"
                Width="150"
                Margin="0,0,0,20"/>
                    
                    <!-- Inventory Summary -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
                        <Border Margin="5" Padding="10" Background="LightBlue" CornerRadius="6">
                            <StackPanel>
                                <TextBlock Text="Green Coffee (lbs)" FontWeight="Bold"/>
                                <TextBlock Text="{Binding KpiSummary.TotalGreenCoffee}" FontSize="16"/>
                            </StackPanel>
                        </Border>
                        <Border Margin="5" Padding="10" Background="PaleGreen" CornerRadius="6">
                            <StackPanel>
                                <TextBlock Text="Tea (lbs)" FontWeight="Bold"/>
                                <TextBlock Text="{Binding KpiSummary.TotalTea}" FontSize="16"/>
                            </StackPanel>
                        </Border>
                        <Border Margin="5" Padding="10" Background="Khaki" CornerRadius="6">
                            <StackPanel>
                                <TextBlock Text="Packing Stock" FontWeight="Bold"/>
                                <TextBlock Text="{Binding KpiSummary.TotalPackingStock}" FontSize="16"/>
                            </StackPanel>
                        </Border>
                        <Border Margin="5" Padding="10" Background="LightSalmon" CornerRadius="6">
                            <StackPanel>
                                <TextBlock Text="Finished Goods" FontWeight="Bold"/>
                                <TextBlock Text="{Binding KpiSummary.TotalFinishedGoods}" FontSize="16"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Tab Control for Inventory Sections -->
                    <TabControl Margin="0,0,0,20">

                        <!-- Green Coffee Inventory Tab -->
                        <TabItem Header="Green Coffee">
                            <StackPanel Margin="10">
                                <TextBlock Text="Green Coffee Inventory" FontSize="18" FontWeight="Bold" Margin="0,0,0,10" />
                                <DataGrid ItemsSource="{Binding GreenCoffeeStock}" SelectedItem="{Binding SelectedGreenCoffee}" AutoGenerateColumns="False" Margin="10">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="ID" Binding="{Binding GreenCoffeeID}" />
                                        <DataGridTextColumn Header="Name" Binding="{Binding CoffeeName}" />
                                        <DataGridTextColumn Header="Quantity" Binding="{Binding StockLevel}" />
                                        <DataGridTextColumn Header="Price" Binding="{Binding Price, StringFormat='{}{0:C}'}" />
                                        <DataGridTextColumn Header="Supplier" Binding="{Binding SupplierName}" />
                                        <DataGridTextColumn Header="Date Received" Binding="{Binding DateReceived}" />
                                    </DataGrid.Columns>
                                </DataGrid>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" >
                                <Button Content="Add/Edit" Command="{Binding OpenAddEditGreenCoffeeCommand}" Width="100" HorizontalAlignment="Right" Margin="10"/>
                                <Button Content="Delete" Command="{Binding DeleteGreenCoffeeCommand}" Width="100" HorizontalAlignment="Right" Margin="10" />
                                </StackPanel>
                            </StackPanel>
                        </TabItem>

                        <!-- Additional inventory tabs can go here -->
                        <!-- Tea Inventory Tab -->
                        <TabItem Header="Tea Inventory">
                            <Border Background="White" Padding="15" CornerRadius="8" BorderBrush="#ddd" BorderThickness="1" Margin="0,0,0,20">
                                <StackPanel>
                                    <TextBlock Text="Tea Inventory" FontSize="18" FontWeight="Bold" Margin="0,0,0,10" />
                                    <DataGrid ItemsSource="{Binding TeaStock }" SelectedItem="{Binding SelectedTea}" AutoGenerateColumns="False" Margin="10">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="ID" Binding="{Binding TeaID}" />
                                            <DataGridTextColumn Header="Name" Binding="{Binding TeaName}" />
                                            <DataGridTextColumn Header="Quantity" Binding="{Binding StockLevel}" />
                                            <DataGridTextColumn Header="Price" Binding="{Binding Price, StringFormat='{}{0:C}'}" />
                                            <DataGridTextColumn Header="Supplier" Binding="{Binding Supplier}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Add/Edit" Command="{Binding OpenAddEditTeaCommand}" Width="100" Margin="0,0,10,0"/>
                                        <Button Content="Delete" Command="{Binding DeleteTeaInventoryCommand}" Width="100" />
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                        </TabItem>
                        <!-- Packing Materials-->
                        <TabItem Header="Packing Materials">
                            <Border Background="White" Padding="15" CornerRadius="8" BorderBrush="#ddd" BorderThickness="1">
                                <StackPanel>
                                    <TextBlock Text="Packing Materials" FontSize="18" FontWeight="Bold" Margin="0,0,0,10" />
                                    <DataGrid ItemsSource="{Binding PackingStock}" SelectedItem="{Binding SelectedPackingMaterial}"  AutoGenerateColumns="False" Margin="10">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="ID" Binding="{Binding PackingMaterialID}" />
                                            <DataGridTextColumn Header="Name" Binding="{Binding MaterialName}" />
                                            <DataGridTextColumn Header="Quantity" Binding="{Binding StockLevel}" />
                                            <DataGridTextColumn Header="Unit" Binding="{Binding Unit}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Add/Edit" Command="{Binding OpenAddEditPackingCommand}" Width="100" Margin="0,0,10,0"/>
                                        <Button Content="Delete" Command="{Binding DeletePackingMaterialCommand}" Width="100" />
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </TabItem>

                        <!-- Finished Goods -->
                        <TabItem Header="Finished Goods">
                            <Border Background="White" Padding="15" CornerRadius="8" BorderBrush="#ddd" BorderThickness="1">
                                <StackPanel>
                                    <TextBlock Text="Finished Goods" FontSize="18" FontWeight="Bold" Margin="0,0,0,10" />
                                    <DataGrid ItemsSource="{Binding FinishedGoodInventory}" AutoGenerateColumns="False" Margin="10">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="ID" Binding="{Binding FinishedGoodID}" />
                                            <DataGridTextColumn Header="ProductName" Binding="{Binding ProductName}" />
                                            <DataGridTextColumn Header="Batch #" Binding="{Binding BatchNumber}" />
                                            <DataGridTextColumn Header="Production Date" Binding="{Binding DateProduced}" />
                                            <DataGridTextColumn Header="Quantity Produced" Binding="{Binding QuantityProduced}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Add/Edit" Command="{Binding OpenAddEditFinishedGoodsCommand}" Width="100" Margin="0,0,10,0"/>
                                        <Button Content="Delete" Command="{Binding DeleteFinishedGoodCommand}" Width="100" />
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </TabItem>
                    </TabControl>
                </StackPanel>
            </ScrollViewer>
        </DockPanel>
    </Grid>

</UserControl>