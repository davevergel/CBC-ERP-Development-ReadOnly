<UserControl x:Class="CbcRoastersErp.Views.ManagePermissionsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:CbcRoastersErp.Views" xmlns:viewmodels="clr-namespace:CbcRoastersErp.ViewModels" d:DataContext="{d:DesignInstance Type=viewmodels:ManagePermissionsViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Border Background="#f4f4f4" Padding="20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock Text="Manage Role Permissions" FontSize="22" FontWeight="Bold"
                       Foreground="#2e3a59" Margin="0,0,0,15"/>

            <!-- Main Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Roles Panel -->
                <GroupBox Header="Select Role" Grid.Column="0" Padding="10">
                    <ComboBox ItemsSource="{Binding Roles}"
                              SelectedItem="{Binding SelectedRole}"
                              DisplayMemberPath="RoleName"
                              FontSize="14"
                              Height="35"
                              Margin="0,5,0,0"/>
                </GroupBox>

                <!-- Permissions Panel -->
                <GroupBox Header="Permissions" Grid.Column="2" Padding="10">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ItemsControl ItemsSource="{Binding PermissionItems}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Content="{Binding Permission.PermissionName}"
                                              IsChecked="{Binding IsAssigned}"
                                              FontSize="13"
                                              Margin="4"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </GroupBox>
            </Grid>

            <!-- Footer Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Content="Save Changes" Command="{Binding SaveCommand}"
                        Width="120" Height="35" Margin="5"
                        Background="#2e86de" Foreground="White" FontWeight="Bold"/>

                <Button Content="Cancel" Command="{Binding CancelCommand}" Width="100" Height="35" Margin="5"
                        Background="#ccc" Foreground="Black"/>
                
                <Button Content="Back to Dashboard" Command="{Binding NavigateBackCommand}" Width="150" Height="35" Margin="5"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
